function classer(){this.animation_step=5,this.animation_speed=1,this.animation_ease="swing",this.animation_element="footer",this.isiPad=null!=navigator.userAgent.match(/iPad/i),this.ie_version="",this.url_string="message/",this.uri="http://thecroc.com/christmas/"}function slideDown(){$("headerLeft p").stop().slideDown(200),$(".headerSocial").stop().slideDown(200)}function slideUp(){$("headerLeft p").stop().slideUp(200),$("headerSocial").stop().slideUp(200)}var flakes=22,snowflake={},snowflake_data={},snowflake_data_len,snowflake_items=Array(0,1,2,3),snowflake_db_active=!1;$.fn.exists=function(){return 0!==this.length},$.fn.hasAttr=function(e){return void 0!==this.attr(e)},classer.prototype.IEVersion=function(){this.ie_version=-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0?!0:!1},classer.prototype.isiPhone=function(){return-1!=navigator.platform.indexOf("iPhone")||-1!=navigator.platform.indexOf("iPod")},classer.prototype.GetUri=function(){},classer.prototype.UrlReady=function(e){return e.attr("rel")?this.uri:this.uri},classer.prototype.GetSnowflakeData=function(){$.ajax({type:"POST",url:croc.uri+"index.php?step=5&lock=3!@vo0a6",dataType:"json",contentType:"application/json",data:"",success:this.StoreSnowflakeData})},classer.prototype.StoreSnowflakeData=function(e){snowflake_db_active=e[0].len>0?!0:!1,snowflake_data=e,snowflake_data_len=e[0].len},classer.prototype.GetRamdomMessage=function(e){$.ajax({type:"POST",url:croc.uri+"index.php?step=2&lock=3!@vo0a6",dataType:"json",contentType:"application/json",data:"",success:this.ShowBadge}),snowflake=e,ga("send","event","CrocChristmas","Click snowflake","Random snowflake clicked")},classer.prototype.GetSpecificMessage=function(e){$.ajax({type:"POST",url:croc.uri+"index.php?step=4&lock=3!@vo0a6",dataType:"json",data:"message_id="+e,success:this.ShowBadge}),ga("send","event","CrocChristmas","Click snowflake","Tagged snowflake clicked")},classer.prototype.ShowBadge=function(e){var t=e.message;if(t.length<21)var o=e.badge+" min";if(t.length>20&&t.length<56)var o=e.badge+" med";if(t.length>55)var o=e.badge+" max";$("#messageBox .message_to").html(e.to),$("#messageBox .message_from").html(e.from),$("#messageBox .themessage").html(e.message),$("#messageBox").attr("class",o),$("#messageBox").show(),$(snowflake).attr("class",e.id)},classer.prototype.clearForm=function(e){if("OK"==e.status){$("#sendxmascheer input[type=text]").val(""),$("#sendxmascheer textarea").val(""),$(".close").trigger("click");var t=$(window).innerWidth();$(".shareBox .facebook").attr("rel",e.message_id),$(".shareBox .twitter").attr("rel",e.message_id),t>480?$(".shareBox").fadeIn(500):$(".shareMobile").show(),croc.ShowBadge(e)}else console.log(e.error)},classer.prototype.limitText=function(e,t,o){if(e.value.length>o)e.value=e.value.substring(0,o);else{var n=o-e.value.length,a=document.getElementById(t);a.innerHTML=n}};var croc=new classer;croc.GetSnowflakeData(),$(function(){$("body").bind("DOMMouseScroll",function(e){if(e.originalEvent.detail>0){$(croc.animation_element).clearQueue();var t=$(croc.animation_element).css("left");t=t.substring(0,t.length-2);var o=$(window).innerWidth(),n=3060-o-croc.animation_step;parseInt(t)<=-parseInt(n)?($(croc.animation_element).stop(),$(croc.animation_element).css("left","-"+n+"px")):$(croc.animation_element).animate({left:"-="+croc.animation_step},croc.animation_speed,croc.animation_ease)}else{$(croc.animation_element).clearQueue();var t=$(croc.animation_element).css("left");t=t.substring(0,t.length-2),parseInt(t)>-croc.animation_step?($(croc.animation_element).stop(),$(croc.animation_element).css("left","0px")):$(croc.animation_element).animate({left:"+="+croc.animation_step},croc.animation_speed,croc.animation_ease)}return!1}),$("body").bind("mousewheel",function(e){if(e.originalEvent.wheelDelta<0){$(croc.animation_element).clearQueue();var t=$(croc.animation_element).css("left");t=t.substring(0,t.length-2);var o=$(window).innerWidth(),n=3060-o-croc.animation_step;parseInt(t)<=-parseInt(n)?($(croc.animation_element).stop(),$(croc.animation_element).css("left","-"+n+"px")):$(croc.animation_element).animate({left:"-="+croc.animation_step},croc.animation_speed,croc.animation_ease)}else{$(croc.animation_element).clearQueue();var t=$(croc.animation_element).css("left");t=t.substring(0,t.length-2),parseInt(t)>-croc.animation_step?($(croc.animation_element).stop(),$(croc.animation_element).css("left","0px")):$(croc.animation_element).animate({left:"+="+croc.animation_step},croc.animation_speed,croc.animation_ease)}return!1}),$("#sendxmascheer").validationEngine({onValidationComplete:function(e,t){if(t){ga("send","event","CrocChristmas","Click create","Message created");var o=$("#sendxmascheer").serialize(),n=croc.uri;$.ajax({type:"POST",url:n+"index.php?step=1&lock=3!@vo0a6",dataType:"json",data:o,success:croc.clearForm})}}}),$(window).resize(function(){flakes=$(window).width()>=768?22:10,jQuery.fn.center=function(){return this.css("position","absolute"),this.css("top",Math.max(0,($(window).height()-$(this).outerHeight())/2+$(window).scrollTop())+"px"),this.css("left",Math.max(0,($(window).width()-$(this).outerWidth())/2+$(window).scrollLeft())+"px"),this}}).resize(),$(document).on("click",".snowflakes > div",function(e){e.preventDefault();var t=$(this).attr("class");$("#messageBox").fadeIn(500),$("#messageBox").fadeIn(500),$(".shareMobile").hide(),"undefined"!=typeof t&&t!==!1?croc.GetSpecificMessage(t):croc.GetRamdomMessage($(this))}),$(document).on("click",".shareMobile",function(e){e.preventDefault(),$(".shareBox").fadeIn(500),$("#messageBox").hide()}),$(function(){$(".daySwitch").click(function(){$(".day").switchClass("day","night",500),$(".night").switchClass("night","day",500)})}),$(function(){$(".postMessage, .PostMe, .whyNot").click(function(e){e.preventDefault(),$(".messageForm").dialog("open"),$(".shareBox").fadeOut(500),$("#messageBox").fadeOut(500),$(".popup").fadeOut(500)}),$(".close").click(function(e){e.preventDefault(),$(".messageForm").dialog("close")}),$(".messageForm").dialog({autoOpen:!1,width:"475",show:{effect:"fade",duration:500},hide:{effect:"fade",duration:500}}),$(".no_message_found").dialog({width:"400",show:{effect:"fade",duration:500},hide:{effect:"fade",duration:500}}),$("#messageBox .closeMsg, .shareBox .mobilecloseMsg").click(function(){$("#messageBox").fadeOut(500),$(".shareBox").fadeOut(500),$(".legend_below").fadeOut(500)}),$(".st_twitter").click(function(e){e.preventDefault();var t=croc.UrlReady($(this)),o=encodeURIComponent("Send a Christmas greeting on a snowflake & help make it snow over London. #CrocChristmas");window.open("http://twitter.com/share?url="+t+"&counturl=&text="+o,"mywindow","width=600,height=400")}),$(".msj_twitter").click(function(e){e.preventDefault();var t=croc.UrlReady($(this)),o=encodeURIComponent("I just made it snow over London with a Christmas greeting on a snowflake! Try it. #CrocChristmas");window.open("http://twitter.com/share?url="+t+"&counturl=&text="+o,"mywindow","width=600,height=400")}),$(".st_facebook").click(function(e){e.preventDefault(),FB.ui({method:"feed",name:"Welcome to Snowflake City",link:croc.UrlReady($(this)),picture:"http://thecroc.com/christmas/img/croc_christmas_200x200b.jpg",caption:croc.UrlReady($(this)),description:"Help make it snow over London this Christmas by sending a greeting on a snowflake. See the greetings shared so far and send your own #CrocChristmas",message:"Help make it snow over London this Christmas by sending a greeting on a snowflake. See the greetings shared so far and send your own #CrocChristmas"})}),$(".msj_facebook").click(function(e){e.preventDefault(),FB.ui({method:"feed",name:"Welcome to Snowflake City",link:croc.UrlReady($(this)),picture:"http://thecroc.com/christmas/img/croc_christmas_200x200b.jpg",caption:croc.UrlReady($(this)),description:"I just made it snow over London by sending a Christmas greeting on a snowflake. See the greetings shared so far and send your own: #CrocChristmas",message:"I just made it snow over London by sending a Christmas greeting on a snowflake. See the greetings shared so far and send your own: #CrocChristmas"})}),$(".st_google").click(function(e){e.preventDefault();{var t="http://thecroc.com/christmas";encodeURIComponent("I just sent a Christmas greeting from #CrocChristmas â€“ and you can too!")}window.open("https://plus.google.com/share?url="+t+"&hl=en-GB","","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")})}),$(".hideIntro").click(function(e){e.preventDefault(),$(".headerLeft p, .headerSocial").toggle(slideDown,slideUp),$(".hideIntro").switchClass("hideIntro","showIntro",500),$(".showIntro").switchClass("showIntro","hideIntro",500)}),$("input, textarea").placeholder(),$("select").selectBoxIt({defaultText:"Select your frame"}),$(".crocInfo").click(function(e){e.preventDefault(),$(".crocPopup").fadeIn(500)}),$(".crocInfoClose").click(function(e){e.preventDefault(),$(".crocPopup").fadeOut(500)})});